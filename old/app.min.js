var express=require("express"),path=require("path"),favicon=require("serve-favicon"),logger=require("morgan"),cookieParser=require("cookie-parser"),bodyParser=require("body-parser"),coffeeMiddleware=require("coffee-middleware"),routes=require("./routes/index"),users=require("./routes/users"),google=require("./custom_modules/google"),https=require("https"),Async=require("async"),app=express();app.set("views",path.join(__dirname,"views")),app.set("view engine","jade"),app.use(logger("dev")),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.use(cookieParser()),app.use(require("node-sass-middleware")({src:path.join(__dirname,"public"),dest:path.join(__dirname,"public"),indentedSyntax:!0,sourceMap:!0})),app.use(express["static"](path.join(__dirname,"public"))),app.use("/",routes),app.use("/users",users),app.get("/",function(a,b){b.render("index.html")}),app.get("/translation",function(a,b){requestedExpressionData=a.query,Async.parallel({googleVoiceUrl:function(a){a(null,google.VoiceUrlComposer(requestedExpressionData))},googleImages:function(a){google.Images(requestedExpressionData).then(function(b){a(null,b)})},googleTranslation:function(a){google.Translator(requestedExpressionData).then(function(b){a(null,b)})}},function(a,c){a&&console.error(a),b.send(c)})}),app.use(function(a,b,c){var d=new Error("Not Found");d.status=404,c(d)}),"development"===app.get("env")&&app.use(function(a,b,c,d){c.status(a.status||500),c.render("error",{message:a.message,error:a})}),app.use(function(a,b,c,d){c.status(a.status||500),c.render("error",{message:a.message,error:{}})}),module.exports=app;